:root{
  --bg:#f4f6f8;
  --panel:#ffffff;
  --muted:#666;
  --accent:#0b5fff;
  --text:#111;
  --buttonText:#fff;
}

html,body,#root{
  height:100%;
  margin:0;
  font-family: Inter, Roboto, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}

.app{
  display:flex;
  gap:12px;
  padding:12px;
  box-sizing:border-box;
  height:100vh;
}

/* left (canvas) */
.left{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.toolbar{
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
  background:var(--panel);
  padding:10px;
  border-radius:6px;
  box-shadow: 0 1px 4px rgba(16,24,40,0.06);
}

.cal-buttons button, .toolbar button{
  margin-right:6px;
}

.cal-inputs {
  display:flex;
  gap:12px;
  align-items:center;
}

.detection-controls {
  display:flex;
  gap:8px;
  align-items:center;
}

/* stage wrapper to handle scroll wheel zoom; keeps stage centered */
.stage-wrap{
  background: #fff;
  border-radius:6px;
  overflow:hidden;
  box-shadow: 0 2px 8px rgba(16,24,40,0.06);
  display:flex;
  justify-content:center;
  align-items:center;
  flex:1 1 auto;
}

/* right panel */
.right{
  width:320px;
  flex:0 0 320px;
  display:flex;
  flex-direction:column;
}

.panel{
  background:var(--panel);
  padding:12px;
  border-radius:6px;
  box-shadow: 0 1px 4px rgba(16,24,40,0.06);
  height:100%;
  overflow:auto;
}

.panel h3{
  margin:8px 0;
  font-size:14px;
  color:var(--muted);
}

.table-preview{
  max-height:200px;
  overflow:auto;
  border:1px solid #eee;
  margin-top:8px;
  background:#fafafa;
  padding:6px;
  border-radius:4px;
}

.table-preview table{
  border-collapse:collapse;
  width:100%;
  font-size:13px;
}

.table-preview th, .table-preview td{
  border:1px solid #eee;
  padding:6px;
  text-align:left;
}

.probe-row{
  border:1px dashed transparent;
  padding:6px;
  margin:6px 0;
  border-radius:4px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  gap:4px;
  background: transparent;
}

.probe-row.active{
  border-color:rgba(0,0,0,0.08);
  background: linear-gradient(90deg, rgba(11,95,255,0.03), transparent);
}

button{
  background:var(--accent);
  color:var(--buttonText);
  border:none;
  padding:6px 10px;
  border-radius:4px;
  cursor:pointer;
}
button:disabled{opacity:0.5;cursor:default}

input[type="number"], input[type="text"], textarea, select{
  padding:6px;
  border:1px solid #ddd;
  border-radius:4px;
  font-size:13px;
}

/* small helpers */
small{ color:var(--muted); }

.notes { font-size:12px; color:#444; }

/* Konva overlay text styling fallback (Konva's Text uses canvas) */

/* Dark theme overrides */
.dark {
  --bg: #0b1220;
  --panel: #0b1117;
  --muted: #9aa4b2;
  --accent: #4da3ff;
  --text: #e6eef8;
  --buttonText: #061225;
}

.dark .stage-wrap { background: #07101a; box-shadow: 0 2px 12px rgba(0,0,0,0.6); }
.dark .toolbar, .dark .panel { box-shadow: none; border: 1px solid rgba(255,255,255,0.03); }
.dark .table-preview { background: #07101a; border-color: rgba(255,255,255,0.03); }
.dark .probe-row.active { background: linear-gradient(90deg, rgba(77,163,255,0.06), transparent); border-color: rgba(77,163,255,0.12); }

/* Collapsible sections */
.collapsible { margin-bottom: 10px; }
.collapsible-header {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 8px;
  background: transparent;
  border: none;
  padding: 8px 10px;
  cursor: pointer;
  font-weight: 600;
  color: var(--muted);
  border-radius: 6px;
  text-align: left;
}
.collapsible-header:focus { outline: 2px solid rgba(11,95,255,0.12); outline-offset: 2px; }

.collapsible-arrow {
  display: inline-block;
  transition: transform 0.18s ease;
  transform-origin: center;
  width: 14px;
  text-align: center;
  font-weight: 700;
}
.collapsible-arrow.open { transform: rotate(90deg); }

.collapsible-title { flex: 1; }

.collapsible-body {
  padding: 8px 0 12px 0;
  color: var(--text);
}

/* Make form controls easier to read on light backgrounds: remove solid white fill and ensure text is high contrast */
input[type="number"],
input[type="text"],
textarea,
select {
  padding: 6px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 13px;
  color: var(--text);
  background: transparent;
}

/* Keep buttons as-is but ensure small select/inputs visually align in collapsible bodies */
.collapsible-body input,
.collapsible-body select,
.collapsible-body textarea {
  background: transparent;
  color: var(--text);
}

/* Slightly smaller spacing for nested subsections */
.collapsible .collapsible { margin-top: 6px; margin-bottom: 6px; padding-left: 6px; border-left: 2px solid rgba(0,0,0,0.03); }

.dark .collapsible-header { color: var(--muted); }
